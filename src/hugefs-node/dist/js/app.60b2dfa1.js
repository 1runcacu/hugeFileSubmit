(function(){"use strict";var e={757:function(e,t,n){var r=n(9242),i=n(7327),s=(n(4633),n(7658),n(3396)),u=n(7139),l=n(4311),o=n(4870);const a={class:"box"},c={class:"left"},f=["innerHTML"],h=["value"],d=(0,s._)("br",null,null,-1),v=["title","src"];var p={__name:"App",setup(e){const t=(0,o.iH)(""),n=(0,o.iH)(""),r=(0,o.iH)(0),p=(0,o.iH)({title:"",src:""}),g="http://127.0.0.1:8401",m=`${g}/file`,b=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),y=l.Z.create({baseURL:"/serve",timeout:3e4});function w(e,t={},n={},r="post"){return y.post("/proxy",{url:e,params:t,config:n,method:r})}function _(e){return e.substring(e.lastIndexOf(".")+1)}const O=e=>{const t=document.createElement("div");return t.innerHTML=e,t.children[0]};class x{changeHandle(e){j(e.target.files[0])}render(){return this.el=O('<input type="file"/>'),this.el.addEventListener("change",this.changeHandle,!0),this.el}}class H{constructor(e,t=1e4,n=50){this.file=e,this.length=t,this.time=n,this.status="pending"}run(e){return this.status="fulfilled",new Promise(((t,n)=>{const r=H.enCode(this.file,this.length),i=this.timer((n=>{n<r.length?e(r[n],n,r.length,this.status):(i.end(),t())}));i.start()}))}timer(e){let t=0,n=!1;const r=()=>{setImmediate((()=>{n||"rejected"===this.status||(e(t++),setTimeout((()=>{r()}),this.time))}))};return{start:r,stop:()=>n=!0,end:()=>{n=!0,this.status="rejected"}}}}(0,i.Z)(H,"enCode",((e,t=500)=>{const n=new Uint8Array(e),r=Math.ceil(n.length/t),i=[];for(let s=0,u=0;s<r;s++,u+=t)i.push(String.fromCharCode(...n.slice(u,u+t)));return i}));const j=e=>{const i=e.name,s=_(i),u=new FileReader,l=b();p.value.title=`${i}-${l}`,u.onload=function(){w(m,{type:"picture",filename:i,frame:null,hash:l,seq:-1,process:"start"}).then((e=>{r.value=0;let t=-1;new H(u.result).run(((e,n,s)=>{t=n,r.value=n/s,w(m,{type:"picture",filename:i,frame:e,hash:l,seq:t,process:"running"})})).then((e=>{w(m,{type:"picture",filename:i,frame:null,hash:l,seq:t+1,process:"finish"}).then((e=>{r.value=1,n.value=e.data,console.log(e.data),p.value.src=e.data.url}))}))})),t.value=`\n      <b>byteLength:</b>${u.result.byteLength}<br/>\n      <b>fileName:</b>${i}<br/>\n      <b>type:</b>${s}<br/>\n    `},u.readAsArrayBuffer(e)},L=e=>{const t=(new x).render();t.click(e)};return(e,i)=>((0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",c,[(0,s._)("div",{class:"msg",innerHTML:t.value},null,8,f),(0,s._)("button",{onClick:L},"UPLOAD"),(0,s._)("div",null,(0,u.zw)(n.value),1),(0,s._)("div",null,[(0,s._)("progress",{value:r.value,max:"1"},null,8,h),d,(0,s._)("span",null,(0,u.zw)((100*r.value).toFixed(2))+"%",1)])]),(0,s._)("iframe",{class:"right",title:p.value.title,src:p.value.src},null,8,v)]))}};const g=p;var m=g;(0,r.ri)(m).mount("#app")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,r,i,s){if(!r){var u=1/0;for(c=0;c<e.length;c++){r=e[c][0],i=e[c][1],s=e[c][2];for(var l=!0,o=0;o<r.length;o++)(!1&s||u>=s)&&Object.keys(n.O).every((function(e){return n.O[e](r[o])}))?r.splice(o--,1):(l=!1,s<u&&(u=s));if(l){e.splice(c--,1);var a=i();void 0!==a&&(t=a)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,i,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,s,u=r[0],l=r[1],o=r[2],a=0;if(u.some((function(t){return 0!==e[t]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(o)var c=o(n)}for(t&&t(r);a<u.length;a++)s=u[a],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},r=self["webpackChunkhugefs_front"]=self["webpackChunkhugefs_front"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(757)}));r=n.O(r)})();
//# sourceMappingURL=app.60b2dfa1.js.map